<!-- 
  μ΄ νμΌμ€ Reveal.js κΈ°μ¤€
  11: μΈν”„λΌ λ°°ν¬ μλ™ν™” - μ–΄λ–»κ² μλ™μΌλ΅ λ°°ν¬λλ”κ°€? (μμ • λ²„μ „)
  μ¬λΌμ΄λ“μ…λ‹λ‹¤. 
-->
<section data-part-title="Part 2. βοΈ μΈν”„λΌ μλ™ν™” (Terraform)" data-menu-title="λ°°ν¬ μλ™ν™” (How)">
  <h3>How? β‘΅: GitHub Actionsλ΅ μ™„μ „ μλ™ν™”ν•κΈ°</h3>
  <p>
    λ¨λ“  μΈν”„λΌ μ½”λ“λ” <strong>GitHub Actions</strong>μ™€ μ—°λ™λμ–΄, μ½”λ“ λ³€κ²½μ΄
    μλ™μΌλ΅ μ‹¤μ  AWS μΈν”„λΌμ— λ°μλ©λ‹λ‹¤. <br />
    μ΄λ¥Ό ν†µν•΄ <strong>μ‚¬λμ μ‹¤μκ°€ κ°μ…λ  μ—¬μ§€κ°€ μ—†λ”</strong> μ™„λ²½ν• μλ™ν™”
    λ°°ν¬ ν™κ²½μ„ κµ¬μ¶•ν–μµλ‹λ‹¤.
  </p>
  <div class="mermaid" style="margin-top: 20px">
    <pre>
%%{init: {'theme': 'dark', 'themeVariables': { 'darkMode': true }}}%%
sequenceDiagram
    participant D as π§‘β€π’» Developer
    participant G as GitHub
    participant TFC as βοΈ Terraform Cloud
    participant AWS as AWS

    D->>G: 1. `main` λΈλμΉμ—<br>Terraform μ½”λ“ Push
    G->>TFC: 2. WebhookμΌλ΅ μ‘μ—… νΈλ¦¬κ±°
    TFC->>TFC: 3. Plan μ‹¤ν–‰ (λ³€κ²½ μ‚¬ν•­ κ³„μ‚°)
    TFC->>AWS: 4. Apply μ‹¤ν–‰ (μΈν”„λΌ λ³€κ²½ μ μ©)
    Note right of TFC: (μ‘μ—… κ²°κ³Όλ” TFC UI λλ”<br>μ—°λ™λ μ•λ¦Ό μ±„λ„μ—μ„ ν™•μΈ)
    </pre>
  </div>
  <aside class="notes">
    μ΄λ ‡κ² μ½”λ“λ΅ μ‘μ„±λ μΈν”„λΌλ” μ–΄λ–»κ² μ‹¤μ  AWS ν΄λΌμ°λ“μ— λ°μλ κΉμ”? μ €ν¬λ”
    μ΄ λ¨λ“  κ³Όμ •μ„ GitHubκ³Ό Terraform Cloudλ¥Ό μ—°λ™ν•μ—¬ μλ™ν™”ν–μµλ‹λ‹¤.
    <br /><br />
    νλ¦„μ€ λ‹¤μκ³Ό κ°™μµλ‹λ‹¤.
    <br />
    1. κ°λ°μκ°€ μΈν”„λΌ μ½”λ“λ¥Ό μμ •ν•κ³  GitHubμ `main` λΈλμΉμ— ν‘Έμ‹ν•©λ‹λ‹¤. 2.
    GitHubμ€ μ΄ λ³€κ²½μ„ κ°μ§€ν•κ³ , μ—°κ²°λ
    <strong>Terraform Cloudμ— Webhook μ‹ νΈ</strong>λ¥Ό λ³΄λƒ…λ‹λ‹¤. "μ½”λ“κ°€
    λ°”λ€μ—μΌλ‹ ν™•μΈν•΄λ΄!" λΌλ” μ‹ νΈμ…λ‹λ‹¤. 3. μ‹ νΈλ¥Ό λ°›μ€ Terraform Cloudλ” μ¦‰μ‹
    ν•΄λ‹Ή μ½”λ“μ— λ€ν• <strong>Plan(κ³„ν)</strong> μ‘μ—…μ„ μ‹¤ν–‰ν•μ—¬ μ–΄λ–¤ μΈν”„λΌκ°€
    λ³€κ²½λ μ§€ κ³„μ‚°ν•©λ‹λ‹¤. 4. κ³„νμ΄ μ™„λ£λκ³  (ν•„μ”μ‹ μΉμΈ ν›„)
    <strong>Apply(μ μ©)</strong> λ‹¨κ³„κ°€ μ‹¤ν–‰λλ©΄, Terraform Cloudκ°€ μ§μ ‘ AWSμ—
    μ ‘μ†ν•μ—¬ μ‹¤μ  μΈν”„λΌλ¥Ό μ½”λ“μ™€ μΌμΉν•λ„λ΅ λ³€κ²½ν•©λ‹λ‹¤. <br /><br />
    μ΄ λ°©μ‹μ ν•µμ‹¬μ€, μΈν”„λΌ λ³€κ²½μ λ¨λ“  κ³Όμ •κ³Ό κ²°κ³Όκ°€
    <strong>Terraform Cloudμ— μ¤‘μ•™ μ§‘μ¤‘μ μΌλ΅ κΈ°λ΅λκ³  κ΄€λ¦¬</strong>λλ‹¤λ”
    μ μ…λ‹λ‹¤. κ°λ°μλ” GitHubμ—μ„ μ½”λ“λ¥Ό κ΄€λ¦¬ν•κ³ , μΈν”„λΌμ μ‹¤μ  λ³€κ²½ λ‚΄μ—­κ³Ό
    μƒνƒλ” Terraform Cloudμ—μ„ μ¶”μ ν•©λ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ μ•μ •μ μ΄κ³  μ‹ λΆ°ν•  μ μλ”
    μΈν”„λΌ μ΄μμ΄ κ°€λ¥ν•΄μ΅μµλ‹λ‹¤.
  </aside>
</section>

<section>
  <section data-menu-title="λ°°ν¬ μλ™ν™” (How)">
    <h3>How? GitHub ActionsμΌλ΅ κµ¬ν„ν• 'μ›ν΄λ¦­ λ°°ν¬'</h3>
    <p>
      λ‚΄λ¶€ ν…μ¤νΈκ°€ μ™„λ£λ μƒλ΅μ΄ κΈ°λ¥μ€ λ” μ΄μƒ λ³µμ΅ν• κ³Όμ • μ—†μ΄, <strong>GitHub Actions</strong> ν™”λ©΄μ—μ„ λ²„νΌ ν΄λ¦­ ν• λ²μΌλ΅ λ°°ν¬λ©λ‹λ‹¤. μ΄λ¥Ό μ„ν•΄ <strong>μλ™ μ‹¤ν–‰(workflow_dispatch)</strong> κΈ°λ¥μ„ ν™μ©ν–μµλ‹λ‹¤.
    </p>
    <div style="display: flex; align-items: flex-start; gap: 20px; margin-top: 20px;">
      
      <div class="fragment" style="flex: 1; text-align: center;">
        <p style="font-size: 0.9em;"><strong>1. λ°°ν¬ μ‹¤ν–‰ (Trigger)</strong></p>
        <a href="assets/slide6-1.png" target="_blank">
          <img src="assets/slide6-1.png" alt="GitHub Actionsμ—μ„ μλ™μΌλ΅ λ°°ν¬λ¥Ό μ‹¤ν–‰ν•λ” ν™”λ©΄" style="max-width: 100%; border-radius: 8px; border: 1px solid #555;"/>
        </a>
        <p style="font-size: 0.8em; margin-top: 10px;">λ¦΄λ¦¬μ¦ λ²„μ „ νƒκ·Έλ¥Ό μ…λ ¥ν•κ³ <br/>'Run workflow' λ²„νΌμ„ ν΄λ¦­ν•©λ‹λ‹¤.</p>
      </div>

      <div class="fragment" style="flex: 1; text-align: center;">
        <p style="font-size: 0.9em;"><strong>2. μλ™ν™”λ μ‘μ—… (Execute)</strong></p>
        <a href="assets/slide6-2.png" target="_blank">
          <img src="assets/slide6-2.png" alt="λ°°ν¬ μ›ν¬ν”λ΅μ°μ μƒμ„Έ μ‹¤ν–‰ λ‹¨κ³„" style="max-width: 100%; border-radius: 8px; border: 1px solid #555;"/>
        </a>
        <p style="font-size: 0.8em; margin-top: 10px;">μ΄λ―Έμ§€ λΉλ“, ECR ν‘Έμ‹, EC2 λ°°ν¬κΉμ§€<br/><strong>1λ¶„ λ‚΄μ™Έ</strong>μ— μλ™μΌλ΅ μ™„λ£λ©λ‹λ‹¤.</p>
      </div>

      <div class="fragment" style="flex: 1; text-align: center;">
        <p style="font-size: 0.9em;"><strong>3. λ°°ν¬ κΈ°λ΅ (Result)</strong></p>
        <a href="assets/slide6-3.png" target="_blank">
          <img src="assets/slide6-3.png" alt="μ„±κ³µμ μΌλ΅ μ™„λ£λ λ°°ν¬ κΈ°λ΅ λ©λ΅" style="max-width: 100%; border-radius: 8px; border: 1px solid #555;"/>
        </a>
        <p style="font-size: 0.8em; margin-top: 10px;">λ¨λ“  λ°°ν¬ μ΄λ ¥μ΄ ν¬λ…ν•κ² κΈ°λ΅λμ–΄<br/>μ¶”μ  λ° κ΄€λ¦¬κ°€ μ©μ΄ν•©λ‹λ‹¤.</p>
      </div>

    </div>
    <aside class="notes">
      μ €ν¬κ°€ κµ¬ν„ν• 'μ›ν΄λ¦­ λ°°ν¬'μ μ‹¤μ  λ¨μµμ…λ‹λ‹¤. λ³µμ΅ν• λ…λ Ήμ–΄ λ€μ‹ , μ΄ ν™”λ©΄μ—μ„ λ¨λ“  λ°°ν¬κ°€ μ‹μ‘λκ³  κ΄€λ¦¬λ©λ‹λ‹¤. κ³Όμ •μ€ ν¬κ² μ„Έ λ‹¨κ³„λ΅ λ‚λ‰©λ‹λ‹¤.
      <br/><br/>
      <strong>μ²« λ²μ§Έλ” 'μ‹¤ν–‰'μ…λ‹λ‹¤.</strong> λ°°ν¬ μ¤€λΉ„κ°€ λλ‚λ©΄, GitHub Actionsμ—μ„ λ°°ν¬ν•  λ²„μ „(νƒκ·Έ)μ„ μ„ νƒν•κ³  'Run workflow' λ²„νΌλ§ λ„λ¥΄λ©΄ λ©λ‹λ‹¤.
      <br/><br/>
      <strong>λ‘ λ²μ§Έλ” 'μλ™ν™”'μ…λ‹λ‹¤.</strong> λ²„νΌμ„ λ„λ¥΄λ” μκ°„, λ―Έλ¦¬ μ•½μ†λ μ¤ν¬λ¦½νΈκ°€ μ‹¤ν–‰λμ–΄ λ¨λ“  κ³Όμ •μ΄ 1λ¶„ μ•μ— μλ™μΌλ΅ λλ‚©λ‹λ‹¤.
      <br/><br/>
      <strong>λ§μ§€λ§‰μ€ 'κΈ°λ΅'μ…λ‹λ‹¤.</strong> λ¨λ“  λ°°ν¬ κ³Όμ •μ€ ν¬λ…ν•κ² κΈ°λ΅λμ–΄ μ¶”μ κ³Ό κ΄€λ¦¬κ°€ μ©μ΄ν•©λ‹λ‹¤.
      <br/><br/>
      (μ•„λ μ¬λΌμ΄λ“λ΅ μ΄λ™ν•λ©°) κ·ΈλΌ μ΄ κ³Όμ •μ„ μ‹¤μ λ΅ κµ¬ν„ν• μ½”λ“μ ν•µμ‹¬ λ¶€λ¶„μ„ κ°„λµν μ‚΄ν΄λ³΄κ² μµλ‹λ‹¤.
    </aside>
  </section>

  <section data-menu-title="λ°°ν¬ μλ™ν™” (Code)">
    <h4>GitHub Actions μ›ν¬ν”λ΅μ° ν•µμ‹¬ μ½”λ“</h4>
    <p style="font-size: 0.8em; margin-bottom: 20px;">
      μ‹¤μ  λ°°ν¬μ— μ‚¬μ©λ GitHub Actions μ›ν¬ν”λ΅μ°(.yml) νμΌμ μΌλ¶€μ…λ‹λ‹¤.
    </p>
    <div style="display: flex; align-items: flex-start; gap: 20px; justify-content: center;">

      <div class="fragment" style="flex: 1;">
        <p style="font-size: 0.7em; text-align: center;"><strong>1. Trigger: μλ™ μ‹¤ν–‰ μ •μ</strong></p>
        <pre><code class="language-yaml" style="font-size: 0.7em; height: 220px;" data-trim data-noescape>
on:
  workflow_dispatch:
    inputs:
      git_ref:
        description: "λΉλ“ν•  Git μ°Έμ΅°"
        required: true
      run_description:
        description: "λ°°ν¬ λ©μ "
        required: true
        </code></pre>
      </div>

      <div class="fragment" style="flex: 1;">
        <p style="font-size: 0.8em; text-align: center;"><strong>2. Execute: λΉλ“ & ν‘Έμ‹</strong></p>
        <pre><code class="language-yaml" style="font-size: 0.7em; height: 220px;" data-trim data-noescape>
jobs:
  build:
    steps:
      - uses: actions/checkout@v4
      - uses: aws-actions/configure-aws-credentials@v4
      - name: Build and Push
        run: |
          docker build -t $ECR_URL .
          docker push $ECR_URL
          </code></pre>
      </div>

      <div class="fragment" style="flex: 1;">
        <p style="font-size: 0.8em; text-align: center;"><strong>3. Result: μ‹¤ν–‰ μ΄λ¦„ μ •μ</strong></p>
        <pre><code class="language-yaml" style="font-size: 0.7em; height: 220px;" data-trim data-noescape>
run-name: "π€ Deploy | ${{ github.event.inputs.run_description }} | by @${{ github.actor }}"

# μ‹¤ν–‰ κ²°κ³Ό μμ‹:
# π€ Deploy | νλ¥΄μ†λ‚ κΈ°λ¥ μ¶”κ°€ | by @user
        </code></pre>
      </div>

    </div>
    <aside class="notes">
      λ³΄μ‹λ” κ²ƒμ²λΌ μ½”λ“λ” μ„Έ λ¶€λ¶„μΌλ΅ λ‚λ‰©λ‹λ‹¤.
      <br/><br/>
      <strong>μ²« λ²μ§Έ</strong>λ” `workflow_dispatch`λ¥Ό μ‚¬μ©ν•΄ μ΄ μ›ν¬ν”λ΅μ°λ¥Ό μλ™μΌλ΅ μ‹¤ν–‰ν•  μ μκ² ν•κ³ , ν•„μ”ν• μ…λ ¥κ°’(μ–΄λ–¤ λ²„μ „μ„ λ°°ν¬ν• μ§€, μ™ λ°°ν¬ν•λ”μ§€)μ„ μ •μν•λ” λ¶€λ¶„μ…λ‹λ‹¤.
      <br/><br/>
      <strong>λ‘ λ²μ§Έ</strong>λ” μ‹¤μ  μ‘μ—… λ‚΄μ©μ…λ‹λ‹¤. μ½”λ“λ¥Ό κ°€μ Έμ™€μ„, AWSμ— μ•μ „ν•κ² λ΅κ·ΈμΈν•κ³ , Docker μ΄λ―Έμ§€λ¥Ό λ§λ“¤μ–΄ μ €μ¥μ†μ— μ¬λ¦¬λ” κ³Όμ •μ΄ λ…μ‹λμ–΄ μμµλ‹λ‹¤.
      <br/><br/>
      <strong>μ„Έ λ²μ§Έ</strong>λ” `run-name` μ„¤μ •μ…λ‹λ‹¤. λ•λ¶„μ— λ„κ°€, μ–΄λ–¤ λ©μ μΌλ΅ λ°°ν¬ν–λ”μ§€ λ©λ΅μ—μ„ ν•λμ— νμ•…ν•  μ μμ–΄ μ¶”μ μ„±μ΄ λ§¤μ° λ†’μ•„μ§‘λ‹λ‹¤.
    </aside>
  </section>
</section>